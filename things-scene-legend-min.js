!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1);Object.defineProperty(e,"Legend",{enumerable:!0,get:function(){return n(r).default}});var i=o(4);Object.defineProperty(e,"LegendItem",{enumerable:!0,get:function(){return n(i).default}})},function(t,e,o){"use strict";function n(t,e,o){var n=e>o?o/e*100:100;return t>=n?t=n:t<=0&&(t=0),t}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"target",name:"target",property:"target"},{type:"select",label:"direction",name:"direction",property:{options:[{display:"Horizontal",value:"horizontal"},{display:"Vertical",value:"vertical"},{type:"number",label:"round",name:"round",property:"round"}]}}]},a={ondragmove:function(t,e,o){var r=o.model,i=r.left,a=(r.top,r.width),l=r.height,u=(o.transcoordP2S(t.x,t.y).x-i)/(a/2)*100;u=n(u,a,l),o.set({round:u})}},l=scene,u=l.Model,s=l.Container,c=(l.RectPath,l.Shape,l.LinearHorizontalLayout),f=l.LinearVerticalLayout,h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),r(e,[{key:"_draw",value:function(t){var e=this.model.round,o=void 0===e?0:e,r=this.bounds,i=r.left,a=r.top,l=r.width,u=r.height;if(t.beginPath(),(o=n(o,l,u))>0){var s=o/100*(l/2);t.moveTo(i+s,a),t.lineTo(i+l-s,a),t.quadraticCurveTo(i+l,a,i+l,a+s),t.lineTo(i+l,a+u-s),t.quadraticCurveTo(i+l,a+u,i+l-s,a+u),t.lineTo(i+s,a+u),t.quadraticCurveTo(i,a+u,i,a+u-s),t.lineTo(i,a+s),t.quadraticCurveTo(i,a,i+s,a),this.model.padding={top:o/2,left:o/2,right:o/2,bottom:o/2}}else t.rect(i,a,l,u);if(this.drawFill(t),this.drawStroke(t),this.target)this.size()!==this.target.model.stockStatus.ranges.length&&this.rebuildLegendItems(t);else for(var c=this.components.length-1;c>=0;c--){var f=this.components[c];this.removeComponent(f)}}},{key:"rebuildLegendItems",value:function(){for(var t=this.model,e=(t.left,t.top,t.width),o=t.height,n=(t.fillStyle,t.strokeStyle,t.fontColor),r=t.fontFamily,i=t.fontSize,a=t.lineHeight,l=t.round,s=void 0===l?0:l,c=t.italic,f=t.bold,h=(t.lineWidth,this.target),p=[],d=h.model.stockStatus,g=d.field,y=d.ranges,v=(h.components,this.labelHeight,this.components.length-1);v>=0;v--)this.removeComponent(this.components[v]);Math.floor(s>0?s/2:0);for(var b,m=0;m<y.length;m++){var _=y[m];p.push(u.compile({type:"legend-item",text:(_.min||b||0)+" <= "+g+" < "+_.max,boxColor:_.color,fontColor:n,fontFamily:r,fontSize:i,lineHeight:a,italic:c,bold:f,width:e,height:o})),b=_.max}this.add(p),this.reflow()}},{key:"dispose",value:function(){this.target&&this.target.off("change",this.onTargetChanged,this),function t(e,o,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,o);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"onchange",value:function(t,e){if(t.hasOwnProperty("target"))return this.target=t.target,void this.invalidate()}},{key:"controls",get:function(){var t=this.model,e=t.left,o=t.top,r=t.width,i=t.round,l=t.height;return i=void 0==i?0:n(i,r,l),[{x:e+r/2*(i/100),y:o,handler:a}]}},{key:"layout",get:function(){return"horizontal"==this.model.direction?c:f}},{key:"target",get:function(){var t=this.model.target;return t?(this._target||(this._target=this.root.findById(t),this._target&&this._target.on("change",this.onTargetChanged,this)),this._target):null},set:function(t){this.target&&this.target.off("change",this.onTargetChanged,this),this._target=null,this.model.target=t}},{key:"nature",get:function(){return i}}]),e}();e.default=h,scene.Component.register("legend",h)},,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r={mutable:!1,resizable:!1,rotatable:!1},i=scene,a=i.Model,l=i.Container,u=(i.RectPath,i.Shape,function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l),n(e,[{key:"_post_draw",value:function(t){(function t(e,o,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,o);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,o,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_post_draw",this).call(this,t),this.model.text&&0===this.size()&&this.initialize()}},{key:"initialize",value:function(){var t=this.model,e=t.text,o=(t.fillStyle,t.strokeStyle,t.fontFamily),n=t.lineWidth,r=void 0===n?0:n,i=t.boxColor,l=this.bounds,u=(l.left,l.top,l.width),s=l.height,c=[],f=Math.min(u,s);c.push(a.compile({type:"rect",fillStyle:i,left:.5*r+.3*f*.5,top:.5*r+.3*f*.5,width:.7*f,height:.7*f,locked:!0})),c.push(a.compile({type:"text",text:e,left:.15*f+f+r,top:.15*f+r,width:u-f-.3*f-2*r,height:s-.3*f-2*r,textAlign:"left",textWrap:!0,fontFamily:o,locked:!0})),this.add(c)}},{key:"reinitialize",value:function(){this.remove(this.components),this.initialize()}},{key:"onchange",value:function(t,e){this.reinitialize()}},{key:"stuck",get:function(){return!0}},{key:"controls",get:function(){}},{key:"nature",get:function(){return r}}]),e}());e.default=u,scene.Component.register("legend-item",u)}]);